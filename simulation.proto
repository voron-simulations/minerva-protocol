syntax = "proto3";

package Minerva.Protocol;

import "common.proto";
import "weather.proto";

message SimulationInfo {
  string world_name = 1;
  repeated double world_size = 2 [ packed = true ];
  repeated Faction factions = 3;

  int64 simulation_start_sim_time = 10;  // in-simulation time at scenario start
  int64 simulation_start_real_time = 11; // real world time of simulation start
}

message SimulationStateUpdate {
  int64 simulation_time = 1; // Current time in simulation (unix timestamp)
  float time_acceleration = 2;

  Weather weather = 10;
}

message GetSimulationInfoRequest {}

message SubscribeSimulationUpdatesRequest {}

service SimulationService {
  rpc GetSimulationInfo(GetSimulationInfoRequest) returns (SimulationInfo);
  rpc SubscribeSimulationUpdates(SubscribeSimulationUpdatesRequest)
      returns (stream SimulationStateUpdate);
}
